{"version":3,"sources":["pages/AdminCourses/index.js","actions/addCourseAdmin.js"],"names":["AdminAddCourse","dispatch","useDispatch","userInfo","useSelector","state","auth","useState","maKhoaHoc","biDanh","tenKhoaHoc","moTa","luotXem","danhGia","hinhAnh","maNhom","ngayTao","moment","format","maDanhMucKhoaHoc","taiKhoanNguoiTao","taiKhoan","newCourse","setNewCourse","schema","yup","shape","required","handleChangeAddNewCourse","useForm","resolver","yupResolver","formState","errors","e","target","name","hinhAnh1","value","vitri","length","hinhAnh2","substring","console","log","className","htmlFor","type","onChange","disabled","onClick","values","form_data","FormData","key","append","a","ADD_COURSE_REQUEST","status","coursesAPI","addCourses","data","ADD_COURSE_SUCCESS","payload","ADD_COURSE_FAILURE","error","response","addCourseAdmin"],"mappings":"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","file":"static/js/19.09919df4.chunk.js","sourcesContent":["import React, {useState} from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport moment from 'moment'\r\nimport * as yup from \"yup\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { useForm } from 'react-hook-form';\r\nimport { addCourseAdmin } from \"src/actions/addCourseAdmin\"\r\n\r\n\r\nexport default function AdminAddCourse() {\r\n    const dispatch = useDispatch();\r\n    const { userInfo } = useSelector((state) => state.auth)\r\n\r\n\r\n    const [newCourse, setNewCourse] = useState({\r\n        maKhoaHoc: \"\",\r\n        biDanh: \"\",\r\n        tenKhoaHoc: \"\",\r\n        moTa: \"\",\r\n        luotXem: 0,\r\n        danhGia: 0,\r\n        hinhAnh: {},\r\n        maNhom: \"\",\r\n        ngayTao: moment(\"\").format(\"DD/MM/YYYY\"),\r\n        maDanhMucKhoaHoc: \"\",\r\n        taiKhoanNguoiTao: userInfo.taiKhoan,\r\n    });\r\n    // tạo validation\r\n    const schema = yup.object().shape({\r\n        maKhoaHoc: yup.string().required(\"Mã khóa học không được để trống\"),\r\n        biDanh: yup.string().required(\"Bí danh không được để trống\"),\r\n        tenKhoaHoc: yup.string().required(\"Tên khóa học không được để trống\"), \r\n    })\r\n    const { formState: {errors},} = useForm({ resolver: yupResolver(schema)});\r\n\r\n    // const handleChangeAddNewCourse = (event) => {\r\n    //     const target = event.target;\r\n    //     if (target.name === \"hinhAnh\") {\r\n    //         this.setState({ hinhAnh: event.target.file[0]}, () => {\r\n    //             console.log(this.state);\r\n    //         })\r\n    //     } else if (target.name === \"ngayTao\") {\r\n    //         this.setState({\r\n    //             ngayTao: moment(event.target.value).format(\"DD/MM/YYYY\"),\r\n    //         });\r\n    //     } else {\r\n    //         this.setState({[event.target.name]: event.target.value});\r\n    //     }\r\n    // };\r\n    const handleChangeAddNewCourse = (e) => {\r\n        \r\n        \r\n        if (e.target.name === \"hinhAnh\") {\r\n            const hinhAnh1 = e.target.value;\r\n            const vitri = hinhAnh1.length;\r\n            const hinhAnh2 = hinhAnh1.substring(12,vitri);\r\n            console.log(hinhAnh2);\r\n            setNewCourse({ ...newCourse, hinhAnh: hinhAnh2 });\r\n        } else if (e.target.name === \"ngayTao\") {\r\n            setNewCourse({\r\n                ...newCourse,\r\n                [e.target.name]: moment(e.target.value).format(\"DD/MM/YYYY\"),\r\n            });\r\n        } else {\r\n            setNewCourse({ ...newCourse, [e.target.name]: e.target.value });\r\n        }\r\n    };\r\n    const handleAddCourse = (values) => {\r\n        console.log(values);\r\n        const form_data = new FormData();\r\n        for (let key in newCourse) {\r\n            // console.log(key, newCourse[key]);\r\n            form_data.append(key, newCourse[key]);\r\n        }\r\n        dispatch(addCourseAdmin(form_data));\r\n    }\r\n    return (\r\n        <div className=\"admin-addcourse\">\r\n            <h5 className=\"text-center\">Add Course</h5>\r\n             <form className=\"form-addcourse\">\r\n                 <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-6\">\r\n                        <div className=\"form-group\">\r\n                        <label htmlFor=\"\">maKhoaHoc*</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"maKhoaHoc\" onChange={handleChangeAddNewCourse}/>\r\n                    </div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"\">biDanh*</label>\r\n                            <input type=\"text\" className=\"form-control\" name=\"biDanh\" onChange={handleChangeAddNewCourse}/>\r\n                        </div>\r\n                    </div>\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">tenKhoaHoc*</label>\r\n                                <input type=\"text\" className=\"form-control\" name=\"tenKhoaHoc\" onChange={handleChangeAddNewCourse} />\r\n                            </div>\r\n                        </div>   \r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                    <label htmlFor=\"\">maNhom*</label>\r\n                                    <input type=\"text\" className=\"form-control\" name=\"maNhom\" onChange={handleChangeAddNewCourse}/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">moTa*</label>\r\n                                <textarea type=\"text\" className=\"form-control\" name=\"moTa\" onChange={handleChangeAddNewCourse} />\r\n                            </div>\r\n                        </div>   \r\n                    </div>\r\n               \r\n                    <div className=\"row\">\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">luotXem*</label>\r\n                                <input type=\"number\" className=\"form-control\" name=\"luotXem\" onChange={handleChangeAddNewCourse}/>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">danhGia*</label>\r\n                                <input type=\"number\" className=\"form-control\" name=\"danhGia\" onChange={handleChangeAddNewCourse}/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                \r\n                    <div className=\"row\">\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">hinhAnh*</label>\r\n                                <input type=\"file\" className=\"form-control\" name=\"hinhAnh\" onChange={handleChangeAddNewCourse}/>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">ngayTao*</label>\r\n                                <input type=\"date\" className=\"form-control\" name=\"ngayTao\" onChange={handleChangeAddNewCourse} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                \r\n                    <div className=\"row\">\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">maDanhMucKhoaHoc*</label>\r\n                                <select\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    name=\"maDanhMucKhoaHoc\"\r\n                                    onChange={handleChangeAddNewCourse}\r\n                                >\r\n                                    <option>TuDuy</option>\r\n                                    <option>BackEnd</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">taiKhoanNguoiTao</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    name=\"taiKhoanNguoiTao\"\r\n                                    disabled\r\n                                    value={newCourse.taiKhoanNguoiTao}\r\n                                    onChange={handleChangeAddNewCourse}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button type=\"button\" className=\"btn btn-primary\" onClick={handleAddCourse}>\r\n                        Add\r\n                    </button>\r\n                 </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { ADD_COURSE_FAILURE, ADD_COURSE_REQUEST, ADD_COURSE_SUCCESS } from \"../constants/addCourseAdmin\";\r\n\r\nimport coursesAPI from \"../services/coursesAPI\";\r\n\r\nexport function addCourseAdmin(values) {\r\n    return async (dispatch) => {\r\n      dispatch({ type: ADD_COURSE_REQUEST });\r\n      try {\r\n          const status = \"Add User Success!\";\r\n          const { data } = await coursesAPI.addCourses(values);\r\n\r\n          dispatch({ type: ADD_COURSE_SUCCESS, payload: { data, status } });\r\n      } catch (error) {\r\n          dispatch({\r\n              type: ADD_COURSE_FAILURE,\r\n              payload: { error: error.response.data },\r\n          });\r\n      }\r\n  };\r\n  }\r\n  "],"sourceRoot":""}